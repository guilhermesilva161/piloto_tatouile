<html lang="pt-BR" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cargos</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
  />
  <style>
    /* Custom font family to mimic the screenshot */
    body {
      font-family: ui-monospace, SFMono-Regular, Consolas, Liberation Mono,
        Menlo, monospace;
    }
  </style>
</head>
<body class="bg-[#04103a] min-h-screen flex flex-col p-4 sm:p-6 md:p-8">
  <header class="flex items-center space-x-2 mb-4">
    <button
      aria-label="Voltar"
      class="text-[#0a1e5e] bg-[#0a1e5e] rounded-md p-1.5 text-xl leading-none hover:bg-[#0f2a8a] transition-colors"
      id="back-to-list"
      style="display:none"
    >
      <i class="fas fa-arrow-left text-white"></i>
    </button>
    <nav class="flex items-center space-x-2" id="nav-buttons">
      <button
        aria-label="Voltar à página anterior"
        onclick="history.back()"
        class="text-white text-lg hover:text-[#3a6fff] transition-colors"
      >
        <i class="fas fa-arrow-left"></i>
      </button>

      <button
        class="bg-[#0a1e5e] text-white rounded-md px-4 py-1.5 font-semibold text-sm leading-none hover:bg-[#0f2a8a] transition-colors"
      >
        Receitas
      </button>
      <button
        class="bg-[#0a1e5e] text-white rounded-md px-4 py-1.5 font-semibold text-sm leading-none hover:bg-[#0f2a8a] transition-colors"
      >
        Categorias
      </button>
      <button
        class="bg-[#0a1e5e] text-white rounded-md px-4 py-1.5 font-semibold text-sm leading-none hover:bg-[#0f2a8a] transition-colors"
      >
      <a href="Funcionarios.html"> 
      Funcionários
      </a> 
      </button>
      <button
        class="bg-transparent border border-[#3a6fff] text-white rounded-md px-4 py-1.5 font-semibold text-sm leading-none"
      >
        Cargos
      </button>
    </nav>
  </header>

  <main class="flex flex-col sm:flex-row gap-6" id="main-content">
    <section class="text-white text-sm leading-relaxed w-full sm:max-w-md" id="list-section">
      <p class="mb-2">Cargos:</p>
      <ul
        id="cargo-list"
        class="border border-[#1a2a5e] p-4 space-y-1 w-full sm:max-w-md max-h-96 overflow-y-auto"
        style="font-family: ui-monospace, SFMono-Regular, Consolas, Liberation Mono, Menlo, monospace;"
      >
        <!-- cargos serão inseridos aqui via JS -->
      </ul>
    </section>

    <section
      id="popup"
      aria-label="Pop-up de confirmação de exclusão"
      class="hidden bg-white text-[#0a1e5e] text-xs rounded-md p-3 w-28 h-16 flex flex-col justify-center items-center font-sans fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 shadow-lg z-50"
      style="font-family: Arial, Helvetica, sans-serif;"
    >
      <p class="text-center mb-1 font-semibold">Pop-up</p>
      <p class="text-center mb-2">Deseja excluir?</p>
      <div class="flex justify-between w-full px-4 text-xs font-normal">
        <button id="confirm-delete" class="hover:underline">Sim</button>
        <button id="cancel-delete" class="hover:underline">Não</button>
      </div>
    </section>

    <div id="overlay" class="hidden fixed inset-0 bg-black bg-opacity-50 z-40"></div>
  </main>

  <button
    id="add-cargo-btn"
    aria-label="Adicionar"
    class="fixed bottom-6 right-6 bg-white text-[#0a1e5e] rounded-md w-10 h-10 flex justify-center items-center text-2xl font-bold shadow-md hover:bg-[#e5e5e5] transition-colors z-30"
  >
    +
  </button>

  <!-- New Add/Edit/View Cargo Page -->
  <section
    id="add-cargo-page"
    class="hidden flex flex-col items-center bg-[#000c2d] min-h-screen p-6"
  >
    <header class="w-full max-w-xs flex items-center bg-[#134a8e] h-10 rounded-b-md relative mb-6">
      <button
        aria-label="Voltar"
        id="back-from-add"
        class="text-white text-lg pl-2 flex items-center justify-center w-10 h-10"
      >
        <i class="fas fa-arrow-left"></i>
      </button>
      <div
        class="absolute left-1/2 -translate-x-1/2 top-1 rounded-md border border-white bg-[#134a8e] text-white text-sm font-semibold px-4 py-[2px]"
      >
        Cargos
      </div>
    </header>

    <main class="w-full max-w-xs flex flex-col items-center space-y-4">
      <button
        id="add-edit-title"
        class="bg-[#00031a] text-white text-xs font-semibold rounded px-4 py-1"
        type="button"
        disabled
      >
        Adicionar Cargo
      </button>

      <label
        for="cargo-name"
        class="block w-full bg-[#134a8e] text-white text-xs font-semibold rounded text-center py-1"
        >Cargo:</label
      >
      <input
        id="cargo-name"
        type="text"
        class="w-full max-w-xs rounded border-0 bg-[#134a8e] text-white text-xs font-semibold text-center py-1"
        autocomplete="off"
      />

      <label
        for="cargo-desc"
        class="block w-full bg-[#134a8e] text-white text-xs font-semibold rounded-t text-center pt-1"
        >Descrição</label
      >
      <textarea
        id="cargo-desc"
        rows="3"
        class="w-full max-w-xs resize-none rounded-b border-0 bg-[#134a8e] text-white text-xs font-semibold text-center pt-1"
      ></textarea>

      <button
        id="save-cargo-btn"
        class="bg-white text-black text-xs font-bold rounded px-3 py-1 self-end"
        type="button"
      >
        SALVAR
      </button>
    </main>
  </section>

  <script>
    const cargos = [
      { nome: "Administrador", descricao: "" },
      { nome: "Analista de Sistemas", descricao: "" },
      { nome: "Chefe", descricao: "" },
      { nome: "Degustador", descricao: "" },
      { nome: "Editor", descricao: "" },
      { nome: "Suporte Técnico", descricao: "" },
    ];

    const cargoList = document.getElementById("cargo-list");
    const popup = document.getElementById("popup");
    const overlay = document.getElementById("overlay");
    const confirmDeleteBtn = document.getElementById("confirm-delete");
    const cancelDeleteBtn = document.getElementById("cancel-delete");

    const addCargoBtn = document.getElementById("add-cargo-btn");
    const addCargoPage = document.getElementById("add-cargo-page");
    const mainContent = document.getElementById("main-content");
    const backToListBtn = document.getElementById("back-to-list");
    const navButtons = document.getElementById("nav-buttons");

    const backFromAddBtn = document.getElementById("back-from-add");
    const cargoNameInput = document.getElementById("cargo-name");
    const cargoDescInput = document.getElementById("cargo-desc");
    const saveCargoBtn = document.getElementById("save-cargo-btn");
    const addEditTitle = document.getElementById("add-edit-title");

    let cargoToDeleteIndex = null;

    function renderCargos() {
      cargoList.innerHTML = "";
      cargos.forEach((cargo, index) => {
        const li = document.createElement("li");
        li.className = "flex justify-between items-center space-x-2";

        // Nome do cargo clicável para visualização
        const span = document.createElement("span");
        span.textContent = cargo.nome;
        span.className = "cursor-pointer underline hover:text-[#3a6fff]";
        span.setAttribute("tabindex", "0");
        span.setAttribute("role", "button");
        span.setAttribute("aria-label", `Visualizar ${cargo.nome}`);
        span.addEventListener("click", () => openViewPage(index));
        span.addEventListener("keydown", (e) => {
          if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            openViewPage(index);
          }
        });
        li.appendChild(span);

        // Botões de ação dentro de um div
        const actions = document.createElement("div");
        actions.className = "flex space-x-1";

        // Edit button (pencil)
        const editBtn = document.createElement("button");
        editBtn.setAttribute("aria-label", `Editar ${cargo.nome}`);
        editBtn.className =
          "text-[#0a1e5e] bg-transparent border border-[#0a1e5e] rounded px-1.5 py-0.5 text-xs leading-none hover:bg-[#0a1e5e] hover:text-white transition-colors";
        editBtn.innerHTML = '<i class="fas fa-edit"></i>';
        editBtn.addEventListener("click", () => openEditPage(index));
        actions.appendChild(editBtn);

        // Delete button (red X)
        const deleteBtn = document.createElement("button");
        deleteBtn.setAttribute("aria-label", `Excluir ${cargo.nome}`);
        deleteBtn.className =
          "text-[#d90000] bg-transparent border border-[#d90000] rounded px-1.5 py-0.5 text-xs leading-none hover:bg-[#d90000] hover:text-white transition-colors";
        deleteBtn.innerHTML = '<i class="fas fa-times"></i>';
        deleteBtn.addEventListener("click", () => openDeletePopup(index));
        actions.appendChild(deleteBtn);

        li.appendChild(actions);

        cargoList.appendChild(li);
      });
    }

    function openDeletePopup(index) {
      cargoToDeleteIndex = index;
      popup.classList.remove("hidden");
      overlay.classList.remove("hidden");
    }

    function closeDeletePopup() {
      cargoToDeleteIndex = null;
      popup.classList.add("hidden");
      overlay.classList.add("hidden");
    }

    function openAddPage() {
      mainContent.style.display = "none";
      addCargoPage.style.display = "flex";
      backToListBtn.style.display = "inline-flex";
      navButtons.style.display = "none";
      cargoNameInput.value = "";
      cargoDescInput.value = "";
      cargoNameInput.disabled = false;
      cargoDescInput.disabled = false;
      saveCargoBtn.style.display = "inline-block";
      addEditTitle.textContent = "Adicionar Cargo";
      saveCargoBtn.textContent = "SALVAR";
      cargoNameInput.focus();
      delete saveCargoBtn.dataset.editIndex;
      delete saveCargoBtn.dataset.viewIndex;
      addCargoBtn.style.display = "none";
    }

    function backToList() {
      addCargoPage.style.display = "none";
      mainContent.style.display = "flex";
      backToListBtn.style.display = "none";
      navButtons.style.display = "flex";
      renderCargos();
      addCargoBtn.style.display = "flex";
    }

    function openEditPage(index) {
      const cargo = cargos[index];
      mainContent.style.display = "none";
      addCargoPage.style.display = "flex";
      backToListBtn.style.display = "inline-flex";
      navButtons.style.display = "none";
      cargoNameInput.value = cargo.nome;
      cargoDescInput.value = cargo.descricao || "";
      cargoNameInput.disabled = false;
      cargoDescInput.disabled = false;
      saveCargoBtn.style.display = "inline-block";
      addEditTitle.textContent = "Editar Cargo";
      saveCargoBtn.textContent = "SALVAR";
      cargoNameInput.focus();
      saveCargoBtn.dataset.editIndex = index;
      delete saveCargoBtn.dataset.viewIndex;
      addCargoBtn.style.display = "none";
    }

    function openViewPage(index) {
      const cargo = cargos[index];
      mainContent.style.display = "none";
      addCargoPage.style.display = "flex";
      backToListBtn.style.display = "inline-flex";
      navButtons.style.display = "none";
      cargoNameInput.value = cargo.nome;
      cargoDescInput.value = cargo.descricao || "";
      cargoNameInput.disabled = true;
      cargoDescInput.disabled = true;
      saveCargoBtn.style.display = "none";
      addEditTitle.textContent = "Visualizar Cargo";
      saveCargoBtn.textContent = "SALVAR";
      saveCargoBtn.removeAttribute("data-edit-index");
      saveCargoBtn.dataset.viewIndex = index;
      addCargoBtn.style.display = "none";
    }

    addCargoBtn.addEventListener("click", () => {
      openAddPage();
    });

    backToListBtn.addEventListener("click", () => {
      backToList();
    });

    backFromAddBtn.addEventListener("click", () => {
      backToList();
    });

    confirmDeleteBtn.addEventListener("click", () => {
      if (cargoToDeleteIndex !== null) {
        cargos.splice(cargoToDeleteIndex, 1);
        renderCargos();
        closeDeletePopup();
      }
    });

    cancelDeleteBtn.addEventListener("click", () => {
      closeDeletePopup();
    });

    saveCargoBtn.addEventListener("click", () => {
      const nome = cargoNameInput.value.trim();
      const descricao = cargoDescInput.value.trim();

      if (nome === "") {
        alert("O nome do cargo não pode ser vazio.");
        cargoNameInput.focus();
        return;
      }

      if (saveCargoBtn.dataset.editIndex !== undefined) {
        // Edit existing cargo
        const idx = Number(saveCargoBtn.dataset.editIndex);
        cargos[idx].nome = nome;
        cargos[idx].descricao = descricao;
        delete saveCargoBtn.dataset.editIndex;
      } else {
        // Add new cargo
        cargos.push({ nome, descricao });
      }

      backToList();
    });

    // Close popups if click outside
    overlay.addEventListener("click", () => {
      closeDeletePopup();
    });

    // Initial render
    renderCargos();
  </script>
</body>
</html>